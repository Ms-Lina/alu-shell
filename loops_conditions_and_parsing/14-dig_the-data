#!/usr/bin/env bash
# This script groups visitors by IP and HTTP status code and displays the data.

# Define the path to the log file
log_file="access.log"

# Check if the log file exists
if [ -e "$log_file" ]; then
    # Use awk to group visitors by IP and HTTP status code, count occurrences, and format the output
    awk '{ count[$1" "$9]++ } END { for (key in count) print count[key], key }' "$log_file" | sort -nr | head -n 10
else
    echo "Error: $log_file does not exist."
fi
